---
// Importaciones y configuración
import BaseLayout from '../../../layouts/BaseLayout.astro';
import rosarioData from '../../../data/rosario.json';
import { RosarioDia } from '../../../classes/rosario.ts';
import HeaderComponent from '../../../components/HeaderComponent.astro';
import BodyLayout from '../../../layouts/BodyLayout.astro';

// Definir la estructura del tipo para los parámetros
interface Path {
  params: {
    dia: string;
  };
}

// Definir las rutas dinámicas que quieres generar
export async function getStaticPaths(): Promise<Path[]> {
  const dias = ['viernes', 'sabado', 'domingo'];
  return dias.map(dia => ({ params: { dia } }));
}

// Obtener el parámetro de la ruta actual
const { dia } = Astro.params;

// Validar el día
if (!['viernes', 'sabado', 'domingo'].includes(dia)) {
  throw new Error('Día no válido.');
}

// Obtener los misterios del Rosario según el día seleccionado
const rosario = RosarioDia.fromJSON(rosarioData, dia);

console.log(rosario);
---

<BaseLayout title="Rosario">
  <HeaderComponent title="Rosario" />
  <BodyLayout>
    <div>
      <!-- <h1 class="titulo-dia">{RosarioDia.}</h1> -->

      <h2 class="titulo-seccion">Inicio</h2>
      <p class="parrafo">{RosarioDia.Inicio}</p>

      <h2 class="titulo-seccion">Acto de Contrición</h2>
      <p class="parrafo">{RosarioDia.ActoContriccion}</p>

        {rosario.misterios.map(misterio => (
          <div>
            <h2 class="titulo-seccion">{misterio.titulo}</h2>
            {misterio.misterios.map(detalle => (
              <div>
                <h3 class="titulo-salmos">{detalle.nombre}</h3>
                <p class="parrafo">{detalle.lectura}</p>
                {/* <img src={detalle.imagen} alt={detalle.nombre}/> Mostrar la imagen */}
                <p class="parrafo">{RosarioDia.PadreNuestro}</p>
                {[...Array(10)].map(() => (
                  <p class="parrafo">{RosarioDia.AveMaria}</p>
                ))}
                <p class="parrafo">{RosarioDia.Gloria}</p>
                <p class="parrafo">{RosarioDia.Comentario2}</p>
                <p class="parrafo">{RosarioDia.OhJesusMio}</p>
              </div>
            ))}
          </div>
        ))}
          <h2 class="titulo-seccion">Letanías</h2>
          <!-- {RosarioDia.Letanias.map(letania => (
            <p class="parrafo">{letania}</p>
          ))} -->


      <h2 class="titulo-seccion">Conclusión</h2>
      <p class="parrafo">{RosarioDia.MadreDeGracia}</p>

    </div>
  </BodyLayout>
</BaseLayout>
