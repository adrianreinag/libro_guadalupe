---
import { pwaInfo } from 'virtual:pwa-info';
import { ViewTransitions } from 'astro:transitions';
import '../styles/styles.css';
import '../styles/fonts.css';
import '../styles/global.css';

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="icon" href="/favicon.svg" type="image/svg+xml">
		<link rel="apple-touch-icon" href="/pwa-192x192.png">
		<link rel="mask-icon" href="/favicon.svg" color="#FFFFFF">
		<meta name="msapplication-TileColor" content="#FFFFFF">
		<meta name="theme-color" content="#ffffff">
		<!-- Etiquetas necesarias para PWA en iOS -->
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="default">
		<meta name="apple-mobile-web-app-title" content="Astro PWA">
		<link rel="apple-touch-icon" href="/pwa-192x192.png"> <!-- Icono de tu app para iOS -->
		<title>{title}</title>
		<meta name="description" content={title}>
		{ pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} /> }
		<script src="/src/pwa.ts"></script>
		<ViewTransitions />
		<script is:inline>
			// Bloquear menú contextual en todas las imágenes
			document.addEventListener('DOMContentLoaded', function() {
				document.addEventListener('contextmenu', function(e) {
					if (e.target.tagName === 'IMG') {
						e.preventDefault();
						return false;
					}
				}, false);

				// Prevenir long press en imágenes en dispositivos táctiles
				document.addEventListener('touchstart', function(e) {
					if (e.target.tagName === 'IMG') {
						e.target.style.webkitTouchCallout = 'none';
					}
				}, { passive: true });
			});
		</script>
	</head>
	<body style="background-color: white;">
		<div class="mobile-view">
			<slot />
		</div>
		<div class="desktop-message">
			<img
				src="/assets/otros/escritorio.png"
				alt="Ilustración de la versión de escritorio"
				class="desktop-illustration"
				loading="lazy"
			/>
			<div class="desktop-content">
				<h1>Versión pensada para móviles</h1>
				<p>Esta aplicación está diseñada para una experiencia vertical en dispositivos móviles. Te recomendamos visitarla desde tu teléfono para disfrutarla al completo.</p>
			</div>
		</div>
	</body>
</html>

<style>
	body {
		margin: 0;
	}

	.mobile-view {
		min-height: 100vh;
		display: block;
	}

	.desktop-message {
		display: none;
		min-height: 100vh;
		padding: 3rem 1.5rem;
		color: #1e293b; /* slate-800 */
		text-align: center;
		align-items: center;
		justify-content: center;
		gap: 1.5rem;
	}

	.desktop-illustration {
		display: block;
		max-width: 28rem;
		width: 100%;
		margin: 0 auto;
	}

	.desktop-content {
		max-width: 34rem;
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
		margin: 0 auto;
	}

	.desktop-content h1 {
		font-size: clamp(1.75rem, 2vw, 2.5rem);
		font-weight: 600;
		margin: 0;
	}

	.desktop-content p {
		font-size: clamp(1rem, 1.5vw, 1.15rem);
		line-height: 1.6;
		margin: 0;
	}

	@media (min-width: 1024px) {
		.mobile-view {
			display: none;
		}

		.desktop-message {
			display: flex;
			flex-direction: column;
		}
	}
</style>
